<p align="center">
  <img src="https://github.com/JohnPss/FirePropagationSimulator/blob/main/Images/cover.png" alt="Sublime's custom image"
        width="400" />
</p>





# FirePropagationSimulator

## Introdu√ß√£o

Projeto desenvolvido para a disciplina de Algoritmos e Estruturas de Dados (AEDS), do Centro Federal de Educa√ß√£o Tecnol√≥gica de Minas Gerais (CEFET-MG), Campus V ‚Äì Divin√≥polis.  Disciplina ministrada pelo professor [Michel Pires](https://github.com/mpiress).

Este projeto implementa uma simula√ß√£o da propaga√ß√£o de fogo em uma matriz, enquanto um animal tenta se mover dentro desse ambiente. O objetivo principal √© observar a intera√ß√£o entre o fogo e o animal, al√©m de registrar a trajet√≥ria do animal e as mudan√ßas no ambiente √† medida que o fogo se espalha.

A simula√ß√£o utiliza uma estrutura de dados que representa o ambiente, onde diferentes c√©lulas podem ser √°rvores, √°gua, √°reas queimadas ou √°reas vazias. O c√≥digo √© implementado em **C++**.



## üìã Problema proposto

Implementar um simulador de propaga√ß√£o de inc√™ndios em uma floresta representada por uma matriz **N√óM**, onde cada c√©lula pode estar em um dos seguintes estados:  
- `0`: √Årea vazia (n√£o queima)  
- `1`: √Årvore saud√°vel  
- `2`: √Årvore em chamas  
- `3`: √Årvore queimada (n√£o propaga fogo)  
- `4`: √Ågua



### **Funcionalidades** 

 **üî•Propaga√ß√£o do Inc√™ndioüå≥**  
O simulador deve implementar as regras de transi√ß√£o de estados, seguindo a sequ√™ncia (`1 ‚Üí 2 ‚Üí 3`). Deve tamb√©m suportar dois modos de propaga√ß√£o: o modo **sem vento**, onde o fogo se propaga apenas nas quatro dire√ß√µes ortogonais, e o modo **com vento**, onde as dire√ß√µes de propaga√ß√£o podem ser configuradas no arquivo `config.h`.

 **ü¶åMovimenta√ß√£o do Animalüêæ**  
Durante a simula√ß√£o, o animal deve se movimentar priorizando as c√©lulas consideradas seguras, obedecendo a ordem de prefer√™ncia (`4 > 0/1 > 3`). Quando encontrar uma c√©lula de √°gua (`4`), ele dever√° transform√°-la em √°rea segura (`0`) e modificar para √°rvores (`1`) nas casas adjacentes. O animal tamb√©m contar√° com um mecanismo de "segunda chance" caso seja atingido pelo fogo.

 **üì•Entrada/Sa√≠daüì§**  
A matriz inicial deve ser lida a partir do arquivo `input.dat`. A cada itera√ß√£o da simula√ß√£o, o estado da matriz deve ser salvo em `output.dat`, registrando o avan√ßo da propaga√ß√£o do inc√™ndio. Ao final da execu√ß√£o, um relat√≥rio deve ser gerado contendo informa√ß√µes sobre os passos percorridos, a quantidade de √°gua encontrada e o status de sobreviv√™ncia do animal.


### **üìùRequisitos T√©cnicos** 
O projeto deve ser desenvolvido em **C/C++**, utilizando boas pr√°ticas de organiza√ß√£o do c√≥digo, com separa√ß√£o em pastas (`src`, headers). A compila√ß√£o dever√° ser gerenciada via `Makefile`, e o execut√°vel precisa ser compat√≠vel com sistemas **Linux**. Tamb√©m √© exigida uma an√°lise de desempenho para comparar as diferentes estrat√©gias de propaga√ß√£o do fogo.

## üìÇEntrada de Dados

#### **üì•Arquivo de Entrada (`input.dat`)**
O arquivo de entrada √© estruturado da seunte forma, primeira linha contem o tamanho (NxM) da matriz e a posicao inicial do foco do incendio, as demais linhas representam a matriz.
**Exemplo:**  
  ```  
  5 5 1 1  
  1 1 1 1 4  
  1 2 1 1 1  
  1 1 1 1 4  
  0 0 1 1 1  
  1 4 1 0 4  
  ```

## ‚öôÔ∏è Arquivo de Configura√ß√£o (`config.hpp`)

O arquivo `config.hpp` define par√¢metros globais para controle da simula√ß√£o.

#### Configura√ß√µes Dispon√≠veis
   - `WIND_ENABLED`: Ativa (`true`) ou desativa (`false`) a influ√™ncia do vento na propaga√ß√£o do fogo.
   - `WIND_DIRECTIONS[4]`: Vetor que especifica as dire√ß√µes permitidas para propaga√ß√£o (√≠ndices fixos):  
   - `MAX_ITERATIONS`: N√∫mero m√°ximo de ciclos da simula√ß√£o antes do encerramento autom√°tico.


#### Exemplo de Configura√ß√£o
```cpp
const int MAX_ITERATIONS = 1000;          // Limite de 1000 itera√ß√µes
const bool WIND_ENABLED = false;          // Vento desativado
const bool WIND_DIRECTIONS[4] = {         // Dire√ß√µes habilitadas:
    true,   // Norte ‚úîÔ∏è  
    false,  // Sul ‚ùå  
    false,  // Oeste ‚ùå  
    false   // Leste ‚ùå
};
```


## üìöMetodologia

A metodologia implementada no projeto √© dividida em v√°rias etapas:

### üß© Estrutura de Dados

- A classe `MatrixStruct` √© usada para armazenar informa√ß√µes sobre a matriz do ambiente, como:
  - Coordenadas iniciais (`initial_x`, `initial_y`)
  - N√∫mero de linhas (`rows`) e colunas (`columns`)
  - A pr√≥pria matriz (`matrix`)



### üêæ Movimento do Animal

A classe `Animal` √© respons√°vel, principalmente, pela l√≥gica de movimenta√ß√£o do animal. Nela, s√£o implementados m√©todos como `moveAnimal`, que concentra a l√≥gica principal de deslocamento.
O animal inicia a simula√ß√£o buscando uma c√©lula segura, que pode ser:

  - **4**: √Ågua
-   **1**: √Årvore saud√°vel  
-   **0**: √Årea vazia
   

Ele se nasce na primeira c√©lula segura que encontrar na matriz.

Foi implementada uma regra de movimenta√ß√£o em que o animal analisa as casas adjacentes e verifica suas prioridades. Se houver duas ou mais casas com a maior prioridade entre as adjacentes, a movimenta√ß√£o √© escolhida aleatoriamente entre elas. Caso exista apenas uma casa com a maior prioridade, o animal se move automaticamente para essa casa.

```cpp
bool funcao moveAnimal()
	/*Se√ß√£o do c√≥digo encarregada de verificar as posi√ß√µes ortogonais e inserir em 
	`candidateCells` aquelas que forem v√°lidas, respeitando os limites da matriz e as 
	prioridades definidas para as c√©lulas. */
	...
	se h√° candidateCells:
        escolher posi√ß√£o_aleat√≥ria em candidateCells
        retorne true
    sen√£o:
        retorne false
```


### üî• Espalhar Fogo

A classe `Fire` √© respons√°vel por gerenciar a propaga√ß√£o do inc√™ndio na matriz da floresta, seguindo regras de propaga√ß√£o configur√°veis (com ou sem vento). Abaixo est√£o os detalhes t√©cnicos:

```cpp
bool spreadIteration()  
    Se burningQueue vazia ‚Üí retorna false  
    Para cada c√©lula na fila:  
        Se √© a primeira queima:  
            Marca como 2  
            Propaga fogo aos vizinhos (processSpread)  
        Sen√£o:  
            Marca como 3  
    Atualiza fila para pr√≥xima itera√ß√£o  
    Retorna true se houver c√©lulas restantes  
```

A fun√ß√£o  `spreadIteration` controla a evolu√ß√£o do inc√™ndio em uma itera√ß√£o da simula√ß√£o. Ela processa as c√©lulas em chamas armazenadas na fila `burningQueue`, atualizando seu estado: c√©lulas queimando pela primeira vez s√£o marcadas como `2` (em chamas) e propagam o fogo para vizinhas v√°lidas (via `processSpread`), enquanto c√©lulas j√° queimadas s√£o atualizadas para `3` (totalmente queimadas) e removidas do ciclo. Novos focos s√£o armazenados em `nextSpread` e transferidos para `burningQueue`, garantindo a continuidade da propaga√ß√£o na pr√≥xima itera√ß√£o. A fun√ß√£o retorna `true` se houver c√©lulas ativas, mantendo a simula√ß√£o em execu√ß√£o, ou `false` quando o fogo se extingue. A configura√ß√£o do vento √© aplicada durante a propaga√ß√£o, limitando dire√ß√µes permitidas.

```cpp
void processSpread(x, y):  
    para cada dire√ß√£o em [Norte, Sul, Oeste, Leste] fa√ßa:  
        se (VENTO_ATIVO E dire√ß√£o n√£o est√° em DIRECOES_DO_VENTO):  
            pule esta dire√ß√£o  
        
        newX = x + offsetX[dire√ß√£o]   
        newY = y + offsetY[dire√ß√£o]    
                
        se (newX, newY est√° dentro dos limites E matriz[newX][newY] == 1):  
            matriz[newX][newY] = 2    
            adicione (newX, newY) √† lista nextSpread   
```


	


### üñ®Ô∏è Tratamento de Sa√≠da de Dados

- A classe `FileReader` lida com a entrada e sa√≠da de dados:
  - Leitura do estado inicial da matriz a partir de um arquivo
  - Escrita dos resultados da simula√ß√£o em outro arquivo


#### **Arquivo de Sa√≠da (`output.dat`)**

O arquivo de sa√≠da registra a representa√ß√£o da matriz a cada intera√ß√£o, ilustrando a propaga√ß√£o do fogo.

**Exemplo:**  
  ```  
Itera√ß√£o 1:
  1 2 1 1 4  
  2 2 2 1 1  
  1 2 1 1 4  
  0 0 1 1 1  
  1 4 1 0 4  
  ```

Ap√≥s o t√©rmino da propaga√ß√£o do fogo ou ao atingir o n√∫mero m√°ximo definido de intera√ß√µes, √© gerado no arquivo de sa√≠da um relat√≥rio final com informa√ß√µes sobre o animal.

 **Exemplo:**  
- Caminho percorrido pelo animal (coordenadas em sequ√™ncia).  
- Passos totais. (Contados apenas quando o animal se desloca de uma c√©lula para outra.)
- N√∫mero de vezes que encontrou √°gua.  
- Itera√ß√£o em que foi cercado (se aplic√°vel).  
- Status de sobreviv√™ncia (`Sim` ou `N√£o`).

### üñ•Ô∏èSimula√ß√£o

- A classe `Simulation` coordenar a execu√ß√£o da simula√ß√£o, integrando a propaga√ß√£o do inc√™ndio e a movimenta√ß√£o do animal, al√©m de gerenciar o fluxo de itera√ß√µes e condi√ß√µes de t√©rmino.

#### üé¨Inicializa√ß√£o:  
   - Cria os objetos `Fire` (fogo) e `Animal` (animal), carregando a matriz da floresta e definindo par√¢metros iniciais.  
   - Abre o arquivo de sa√≠da para registro de logs.  

#### üîÑLoop de Itera√ß√µes:  
   - Executa at√© atingir o n√∫mero m√°ximo de itera√ß√µes (`MAX_ITERATIONS`) ou at√© o fogo se extinguir.  
   - Etapas por Itera√ß√£o:  
     - Movimenta√ß√£o do Animal: O animal se move (se ainda estiver vivo).  
     - Propaga√ß√£o do Fogo: Atualiza o estado das c√©lulas em chamas e registra mudan√ßas.  
     - Verifica√ß√£o de Perigo: Se o animal est√° em uma c√©lula em chamas, aciona a "segunda chance" de fuga.  

#### üèÅCondi√ß√µes de T√©rmino:  
   - Fogo Extinto: Interrompe a simula√ß√£o se n√£o houver mais c√©lulas em chamas.  
   - Animal Preso: Registra a itera√ß√£o em que o animal foi cercado pelo fogo.  

#### Resultados Finais:
   - Salva o mapa de frequ√™ncia do caminho do animal (`animalPathMap.dat`).  
   - Gera relat√≥rio final com m√©tricas de sobreviv√™ncia, passos e √°gua encontrada.

Essa classe √© o n√∫cleo da simula√ß√£o, sincronizando todas as componentes e garantindo a execu√ß√£o ordenada das regras definidas no problema.


## üìäüîçEstudo de Caso / Resultados

[Caso 1:  Matriz Comum sem Influ√™ncia do Vento](https://github.com/JohnPss/FirePropagationSimulator/tree/main/TestCases/Case1)

[Caso 2:  Animal Utiliza a Segunda Chance e Morre](https://github.com/JohnPss/FirePropagationSimulator/tree/main/TestCases/Case2)

[Caso 3: Com Aplica√ß√£o do Vento ](https://github.com/JohnPss/FirePropagationSimulator/tree/main/TestCases/Case3)




## ‚úÖüìòConclus√£o

O projeto de simula√ß√£o de inc√™ndios florestais foi validado com base em tr√™s casos de teste principais.

-   **Animal Utiliza a Segunda Chance e Morre**: Validou o funcionamento do mecanismo de "segunda chance" para o animal, que, ap√≥s ser atingido pelo fogo, tentou sobreviver, mas acabou morrendo.
    
-   **Matriz Comum sem Influ√™ncia do Vento**: Verificou a propaga√ß√£o do fogo e a movimenta√ß√£o do animal em um cen√°rio simples, sem vento, com o animal sobrevivendo.
    
-   **Com Aplica√ß√£o do Vento**: Garantiu que o fogo se propagasse nas dire√ß√µes corretas (Norte e Oeste) e que o animal reagisse adequadamente ao ambiente, evitando √°reas de risco.

As possibilidades de extens√µes futuras, como a inclus√£o de vento e outros fatores ambientais, foram identificadas como √°reas para melhorias.


## üë®üèª‚Äçüî¨ Ambiente de Teste
O c√≥digo foi desenvolvido utilizando as seguintes ferramentas:


![C++](https://img.shields.io/badge/C%2B%2B-17-blue.svg) ![g++](https://img.shields.io/badge/g++-13.3.0-blue.svg) ![Ubuntu](https://img.shields.io/badge/Ubuntu-24.04-orange?logo=ubuntu) ![VSCode](https://img.shields.io/badge/VSCode-1.99.3-blue?logo=visualstudiocode)

**Hardwere:**

   **Processador**: Ryzen 7 5700X  
   **Mem√≥ria RAM**: 32GB 


## üîßüíªModo de Compila√ß√£o


**Clonar o reposit√≥rio**:
```
git clone https://github.com/JohnPss/FirePropagationSimulator
cd FirePropagationSimulator
```

**Instalar depend√™ncias** (se necess√°rio): Caso voc√™ n√£o tenha o G++ e o Make instalados, execute o seguinte comando no terminal:
```
sudo apt update
sudo apt install build-essential
```

**Compilar e executar o projeto**: Agora, basta executar os seguintes comandos para compilar e rodar a simula√ß√£o:
```
make clean
make
make run
```




## **üìÇOrganiza√ß√£o no Reposit√≥rio**:

```
FirePropagation/
‚îú‚îÄ‚îÄ vscode/
‚îú‚îÄ‚îÄ build/
‚îú‚îÄ‚îÄ Images/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ Animal.cpp
‚îÇ   ‚îú‚îÄ‚îÄ Animal.hpp
‚îÇ   ‚îú‚îÄ‚îÄ Config.hpp
‚îÇ   ‚îú‚îÄ‚îÄ FileReaderAndWriter.cpp
‚îÇ   ‚îú‚îÄ‚îÄ FileReaderAndWriter.hpp
‚îÇ   ‚îú‚îÄ‚îÄ Fire.cpp
‚îÇ   ‚îú‚îÄ‚îÄ Fire.hpp
‚îÇ   ‚îú‚îÄ‚îÄ main.cpp
‚îÇ   ‚îú‚îÄ‚îÄ MatrixStruct.cpp
‚îÇ   ‚îú‚îÄ‚îÄ MatrixStruct.hpp
‚îÇ   ‚îú‚îÄ‚îÄ Simulation.cpp
‚îÇ   ‚îú‚îÄ‚îÄ Simulation.hpp
‚îÇ   ‚îú‚îÄ‚îÄ TerrainEnums.hpp
‚îÇ   ‚îú‚îÄ‚îÄ Util.cpp
‚îÇ   ‚îî‚îÄ‚îÄ Util.hpp
‚îú‚îÄ‚îÄ TestCases/
‚îú‚îÄ‚îÄ animal_path_map.dat
‚îú‚îÄ‚îÄ input.dat
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ output.dat
‚îî‚îÄ‚îÄ README.md
```

## Bibliotecas Utilizadas

O projeto utiliza as seguintes bibliotecas para fornecer funcionalidades essenciais:

-   **`<vector>`**: Para manipula√ß√£o de vetores din√¢micos.
-   **`<utility>`**: Para fun√ß√µes auxiliares, como `std::pair`.
-   **`<string>`**: Para manipula√ß√£o de strings.
-   **`<unordered_map>`**: Para uso de mapas de hash eficientes.
-   **`<queue>`**: Para trabalhar com filas (√∫til para a propaga√ß√£o de inc√™ndio).
-   **`<cstdlib>`**: Para fun√ß√µes utilit√°rias gerais, como gera√ß√£o de n√∫meros aleat√≥rios.
-   **`<sstream>`**: Para convers√£o de dados em streams de strings.
-   **`<fstream>`**: Para leitura e escrita de arquivos.
-   **`<iostream>`** : Para entrada e sa√≠da padr√£o.

### üöÄMelhorias Futuras

Embora o projeto esteja funcional, h√° v√°rias √°reas que podem ser aprimoradas:

- Al√©m disso, seria interessante adicionar suporte para m√∫ltiplos animais, permitindo comportamentos e prioridades distintas para cada um, o que tornaria a simula√ß√£o mais complexa e realista.
- Outro ponto que pode ser aprimorado √© a movimenta√ß√£o do animal, implementando uma IA mais inteligente com algoritmos de busca como A* ou Dijkstra, otimizando o caminho at√© as √°reas seguras.
- A variedade no terreno tamb√©m pode ser aumentada, incluindo novos obst√°culos naturais, como mudan√ßas na dire√ß√£o do vento ou diferentes tipos de vegeta√ß√£o que afetam a propaga√ß√£o do fogo.

### üìöCreditos

Arquivo Makefile concedido pelo professor [Michel Pires](https://github.com/mpiress)

### ‚úçÔ∏èAutor

Joao Pedro Siqueira

<div>

[![Email](https://img.shields.io/badge/Email-D14836?style=for-the-badge&logo=gmail&logoColor=white)](mailto:joaopedrosilvasiqueira1@gmail.com) [![LinkedIn](https://img.shields.io/badge/LinkedIn-0077B5?style=for-the-badge&logo=linkedin&logoColor=white)](https://www.linkedin.com/in/jo%C3%A3o-pedro-siqueira-647b1a260/) [![GitHub](https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white)](https://github.com/JohnPss)

</div>


---